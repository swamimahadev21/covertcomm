<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CovertComm - Secure Access</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles & Body */
        :root {
            --dark-bg: #0a0f1a;
            --neon-blue: #00e5ff;
            --neon-green: #00ff88;
            --neon-amber: #ffb700;
            --text-color: #e0e0e0;
            --font-main: 'Exo 2', sans-serif;
            --font-display: 'Orbitron', sans-serif;
        }

        html, body {
            margin: 0;
            padding: 0;
            /* Removed height: 100%; to allow the page to scroll */
            background-color: #000;
            font-family: var(--font-main);
            color: var(--text-color);
        }

        h1, h2, h3, h4 {
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--neon-blue);
        }

        /* --- STAGE 1: TERMINAL SCREEN --- */
        #terminal-screen {
            position: fixed; /* Changed to fixed to be a true overlay */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            opacity: 1;
            transition: opacity 2s ease-in-out;
        }
        
        #start-message {
            color: var(--neon-green);
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.2rem;
            text-shadow: 0 0 5px var(--neon-green);
            cursor: pointer;
            animation: blink-text 1s steps(1) infinite;
        }
        @keyframes blink-text {
            50% { opacity: 0; }
        }

        #terminal-output {
            font-family: 'Courier New', Courier, monospace;
            color: var(--neon-green);
            white-space: pre-wrap;
            font-size: 1.2rem;
            max-width: 90%;
            text-shadow: 0 0 5px var(--neon-green);
        }

        #terminal-cursor {
            display: inline-block;
            width: 1rem;
            height: 1.2rem;
            background-color: var(--neon-green);
            animation: blink-cursor 1s steps(1) infinite;
        }

        .amber-text {
            color: var(--neon-amber);
            text-shadow: 0 0 5px var(--neon-amber);
        }

        .glitch-text {
            color: #ff0000;
            font-size: 3rem;
            font-family: var(--font-display);
            text-shadow: 0 0 10px #ff0000;
            animation: glitch 1s infinite;
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        #access-granted-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .access-granted {
            background-color: rgba(0, 255, 136, 0.1);
            border: 2px solid var(--neon-green);
            padding: 2rem 4rem;
            box-shadow: 0 0 20px var(--neon-green);
            animation: pulse-glow 1.5s infinite alternate;
        }

        .access-granted-text {
            font-size: 3rem;
            color: var(--neon-green);
            font-family: var(--font-display);
            text-shadow: 0 0 15px var(--neon-green);
        }

        @keyframes pulse-glow {
            from { box-shadow: 0 0 10px var(--neon-green); }
            to { box-shadow: 0 0 30px var(--neon-green); }
        }
        
        /* --- STAGE 3: MAIN DASHBOARD --- */
        #main-site {
            /* Removed position: absolute and height: 100% to allow content to flow and scrolling */
            top: 0;
            left: 0;
            width: 100%;
            background-color: var(--dark-bg);
            opacity: 0;
            visibility: hidden;
            transition: opacity 2s ease-in-out, visibility 0s 2s;
            /* Removed overflow-y: auto; as body will now handle the scroll */
            display: flex;
            flex-direction: column;
        }

        /* --- Layout & Grid Background --- */
        #cyber-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image: linear-gradient(rgba(0, 229, 255, 0.05) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(0, 229, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: pan-grid 20s linear infinite;
        }
        @keyframes pan-grid {
            from { background-position: 0 0; }
            to { background-position: 50px 50px; }
        }

        /* --- Persistent UI --- */
        .persistent-ui {
            position: fixed;
            z-index: 10;
        }
        #utc-clock {
            top: 1rem;
            right: 1rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            font-family: 'Courier New', Courier, monospace;
            text-shadow: 0 0 5px var(--neon-blue);
        }
        #access-level {
            bottom: 1rem;
            left: 1rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            border: 1px solid var(--neon-green);
            color: var(--neon-green);
            font-family: var(--font-display);
            text-shadow: 0 0 5px var(--neon-green);
        }

        /* --- Mouse Trail Canvas --- */
        #mouse-trail-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 99;
            opacity: 0.5;
        }

        /* --- Content Sections --- */
        .content-section {
            padding: 5rem 5%;
            border-bottom: 1px solid rgba(0, 229, 255, 0.2);
            position: relative;
        }
        .content-section:last-of-type {
            border-bottom: none;
        }

        /* --- Hero Section --- */
        #hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-size: cover;
            background-position: center;
            background-blend-mode: overlay;
        }
        #hero-title {
            font-size: clamp(3rem, 10vw, 8rem);
            color: var(--neon-blue);
            /* Removed text-shadow and animation for a cleaner look */
        }
        #hero-subtitle {
            font-size: clamp(1rem, 3vw, 2rem);
            color: var(--text-color);
            margin-top: 1rem;
        }
        /* Removed @keyframes glow-pulse */

        /* --- Holographic Image --- */
        #holographic-image {
            width: clamp(200px, 40vw, 400px);
            height: auto;
            margin-top: 2rem;
            filter: drop-shadow(0 0 10px var(--neon-blue)) brightness(1.2) contrast(1.5);
            animation: holographic-pulse 4s linear infinite alternate;
        }
        @keyframes holographic-pulse {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.05); opacity: 1; }
        }
        #covertcomm-logo {
            max-width: 500px; /* Adjusted logo size */
            height: auto;
            margin-bottom: 2rem;
            margin-top: 2rem; /* Added top margin for better placement */
            filter: drop-shadow(0 0 10px var(--neon-blue));
        }

        /* --- Classified Mission Log --- */
        #aim-of-project h2, #founders h2, #research-papers h2 {
            border-bottom: 2px solid var(--neon-blue);
            padding-bottom: 0.5rem;
            display: inline-block;
            margin-bottom: 2rem;
        }
        .classified-log {
            background: rgba(0, 229, 255, 0.05);
            border: 1px solid var(--neon-blue);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: inset 0 0 10px var(--neon-blue), 0 0 10px var(--neon-blue);
        }

        /* --- Components Grid --- */
        #components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        .data-card {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 136, 0.2);
            padding: 1.5rem;
            border-radius: 10px;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        .data-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--neon-green), inset 0 0 10px var(--neon-green);
        }
        .data-card h3 {
            color: var(--neon-green);
        }

        /* --- Founders Section --- */
        .founder-profile {
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--neon-blue);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }
        .founder-photo {
            width: 100px;
            height: 100px;
            background-color: #333;
            border-radius: 50%;
            margin-right: 1.5rem;
            border: 2px solid var(--neon-blue);
            object-fit: cover;
            filter: grayscale(100%) contrast(1.2);
        }
        .founder-info h3 {
            margin: 0;
            color: var(--neon-blue);
            text-shadow: 0 0 5px var(--neon-blue);
        }
        .founder-info p {
            margin: 0;
            font-style: italic;
            color: #8899aa;
        }

        /* --- Research Papers Section --- */
        .research-paper-item {
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.4);
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
            border-left: 5px solid var(--neon-green);
            transition: background 0.3s;
            cursor: pointer;
        }
        .research-paper-item:hover {
            background: rgba(0, 255, 136, 0.1);
        }
        .pdf-icon {
            width: 24px;
            height: 24px;
            fill: var(--neon-green);
            margin-right: 1rem;
            flex-shrink: 0;
        }
        .paper-title {
            margin: 0;
            color: var(--text-color);
            font-weight: 700;
        }
        .paper-link {
            text-decoration: none;
            color: var(--text-color);
        }

        /* --- Video Section --- */
        #video-section {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .video-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 0; /* Ensures the container's height is determined by padding-bottom */
            padding-bottom: 56.25%; /* Maintains a 16:9 aspect ratio */
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid var(--neon-blue);
            box-shadow: 0 0 20px var(--neon-blue);
            overflow: hidden;
        }
        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* --- PDF Modal --- */
        .pdf-modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .modal-content {
            background-color: var(--dark-bg);
            border: 2px solid var(--neon-blue);
            box-shadow: 0 0 20px var(--neon-blue);
            width: 90%;
            max-width: 1000px;
            height: 90%;
            display: flex;
            flex-direction: column;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid var(--neon-blue);
        }

        .modal-header h3 {
            margin: 0;
            color: var(--neon-green);
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
        }

        .modal-button {
            background-color: transparent;
            color: var(--neon-blue);
            border: 1px solid var(--neon-blue);
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            font-family: var(--font-display);
            text-transform: uppercase;
        }
        .modal-button:hover {
            background-color: var(--neon-blue);
            color: var(--dark-bg);
            box-shadow: 0 0 10px var(--neon-blue);
        }

        .pdf-iframe {
            flex-grow: 1;
            border: none;
            background-color: #000;
        }


        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            #terminal-output { font-size: 1rem; }
            #hero-title { font-size: clamp(2rem, 12vw, 5rem); }
            .content-section { padding: 3rem 5%; }
        }
    </style>
</head>
<body>

    <!-- Stage 1: Terminal Entry Screen -->
    <div id="terminal-screen">
        <!-- Hidden input for mobile keyboard -->
        <input type="text" id="codeword-input-hidden" style="position: absolute; top: -1000px; opacity: 0;">
        <!-- Scanlines effect using a div -->
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: repeating-linear-gradient(
            to bottom,
            rgba(0,0,0,0) 0px,
            rgba(0,0,0,0.05) 1px,
            rgba(0,0,0,0.2) 2px
        ); pointer-events: none; z-index: 1001;"></div>
        <p id="start-message">Press any key to begin...</p>
        <pre id="terminal-output"></pre>
        <div id="access-granted-container">
            <div class="access-granted">
                <div class="access-granted-text">ACCESS GRANTED</div>
            </div>
        </div>
    </div>

    <!-- Stage 3: Main Website Dashboard -->
    <div id="main-site">
        <canvas id="mouse-trail-canvas"></canvas>
        <div id="cyber-grid"></div>

        <!-- Persistent UI -->
        <div id="utc-clock" class="persistent-ui"></div>
        <div id="access-level" class="persistent-ui">CLASSIFIED ACCESS LEVEL: ALPHA-1</div>

        <!-- Hero Section -->
        <section id="hero" class="content-section">
            <img src="covertcommlogo.png" alt="CovertComm Logo" id="covertcomm-logo">
            <h2 id="hero-subtitle">AI-Powered Timed Encryption & Fictional Obfuscation System.</h2>
            <img src="bgearth.png" alt="Holographic Globe" id="holographic-image">
        </section>

        <!-- Aim of the Project -->
        <section id="aim-of-project" class="content-section">
            <h2>Aim of the Project</h2>
            <div class="classified-log">
                <p><strong>[CLASSIFIED MISSION LOG]</strong></p>
                <p>Objective: Develop an unbreakable, AI-driven communication protocol for clandestine operations. The system, codenamed "CovertComm," will utilize a multi-layered approach to ensure message integrity and confidentiality. By integrating advanced encryption with a novel fictional obfuscation method, we aim to create a communication system that is not only secure but also imperceptible to adversarial analysis. The system's timed encryption and self-destruct capabilities will provide an unprecedented level of operational security, safeguarding critical intelligence from compromise. Our mission is to secure the digital frontier, one message at a time.</p>
            </div>
        </section>

        <!-- Components -->
        <section id="components" class="content-section">
            <h2>System Components</h2>
            <div id="components-grid">
                <div class="data-card">
                    <h3>AES-256 Encryption</h3>
                    <p>Military-grade symmetric encryption to secure all data transmissions. Data is encrypted in transit and at rest, protecting against interception.</p>
                </div>
                <div class="data-card">
                    <h3>AI Story Generator</h3>
                    <p>An integrated AI module that creates realistic but fictional narratives to obfuscate true message content. It embeds encrypted data seamlessly within the text.</p>
                </div>
                <div class="data-card">
                    <h3>Auto-Change Timer</h3>
                    <p>A dynamic timer that automatically rotates encryption keys and obfuscation patterns at set intervals, preventing pattern recognition.</p>
                </div>
                <div class="data-card">
                    <h3>Daily Sync Protocol</h3>
                    <p>Ensures all authorized devices are synchronized with the latest security keys and operational parameters, maintaining a secure network.</p>
                </p>
                </div>
                <div class="data-card">
                    <h3>Offline Mode</h3>
                    <p>Allows for the secure creation and storage of messages without a network connection, ensuring operational continuity in hostile environments.</p>
                </div>
                <div class="data-card">
                    <h3>Self-Destruct Protocol</h3>
                    <p>A fail-safe mechanism that securely and irrecoverably erases all traces of a message if a specified timer or condition is met.</p>
                </div>
            </div>
        </section>

        <!-- Technology Stack -->
        <section id="tech-stack" class="content-section">
            <h2>Technology Stack</h2>
            <div id="tech-icons">
                <p>Icons and descriptions for Python, AI/ML, Encryption libraries, Secure APIs would go here.</p>
            </div>
        </section>

        <!-- Research Papers -->
        <section id="research-papers" class="content-section">
            <h2>Research Papers</h2>
            <div id="papers-list">
                <div class="research-paper-item" onclick="openPdfModal('1.pdf', 'Technological_advances_in_military_communications_.pdf')">
                    <svg class="pdf-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7h5.5L14 3.5V9c0 .55.45 1 1 1zm-2 4v-2h-2v2H9v2h2v2h2v-2h2v-2h-2z" fill="var(--neon-green)"/></svg>
                    <p class="paper-title">1 Technological_advances_in_military_communications_</p>
                </div>
                <div class="research-paper-item" onclick="openPdfModal('2.pdf', 'IET Quantum Communication - 2024 - Biswas - Advancing quantum communication security  Metamaterial based quantum key.pdf')">
                    <svg class="pdf-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7h5.5L14 3.5V9c0 .55.45 1 1 1zm-2 4v-2h-2v2H9v2h2v2h2v-2h2v-2h-2z" fill="var(--neon-green)"/></svg>
                    <p class="paper-title">2 IET Quantum Communication - 2024 - Biswas - Advancing quantum communication security Metamaterial based quantum key</p>
                </div>
                <div class="research-paper-item" onclick="openPdfModal('3.pdf', 'Research on the Application of Digital Technology in Military Communications.pdf')">
                    <svg class="pdf-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7h5.5L14 3.5V9c0 .55.45 1 1 1zm-2 4v-2h-2v2H9v2h2v2h2v-2h2v-2h-2z" fill="var(--neon-green)"/></svg>
                    <p class="paper-title">3 Research on the Application of Digital Technology in Military Communications</p>
                </div>
                <div class="research-paper-item" onclick="openPdfModal('4.pdf', 'Armed Forces and Technical communication : Enhancing Operational Effectiveness through Advanced Technical Communication Strategies in the Armed Forces.pdf')">
                    <svg class="pdf-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7h5.5L14 3.5V9c0 .55.45 1 1 1zm-2 4v-2h-2v2H9v2h2v2h2v-2h2v-2h-2z" fill="var(--neon-green)"/></svg>
                    <p class="paper-title">4 Armed Forces and Technical communication : Enhancing Operational Effectiveness through Advanced Technical Communication Strategies in the Armed Forces</p>
                </div>
                <div class="research-paper-item" onclick="openPdfModal('5.pdf', 'Analysis of Military Application of Software Radio Communication Technology.pdf')">
                    <svg class="pdf-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7h5.5L14 3.5V9c0 .55.45 1 1 1zm-2 4v-2h-2v2H9v2h2v2h2v-2h2v-2h-2z" fill="var(--neon-green)"/></svg>
                    <p class="paper-title">5 Analysis of Military Application of Software Radio Communication Technology</p>
                </div>
            </div>
        </section>
        
        <!-- Concept Video -->
        <section id="video-section" class="content-section">
            <h2 style="color: var(--neon-blue); text-shadow: 0 0 5px var(--neon-blue);">CLASSIFIED VISUAL FILE</h2>
            <div class="video-container">
                <!-- HTML5 video player for Complete25.mp4 -->
                <video poster="bgearth.png" controls autoplay loop>
                    <source src="Complete25.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </section>
        
        <!-- Founders Section -->
        <section id="founders" class="content-section">
            <h2>Founders</h2>
            <div class="founder-profile">
                <img src="mahadev.jpg" alt="Mahadev's Photo" class="founder-photo">
                <div class="founder-info">
                    <h3><a href="https://www.linkedin.com/in/swamimahadev21" style="color: var(--neon-blue); text-decoration: none;">Mahadev Rajkumar Swami</a></h3>
                    <p>Project Lead & Architect</p>
                </div>
            </div>
            <div class="founder-profile">
                <img src="aniket.jpg" alt="Aniket's Photo" class="founder-photo">
                <div class="founder-info">
                    <h3><a href="https://www.linkedin.com/in/aniket-dede-a642b0295/" style="color: var(--neon-blue); text-decoration: none;">Aniket Vikas Dede</a></h3>
                    <p>Senior AI/ML Specialist</p>
                </div>
            </div>
        </section>

    </div>

    <!-- PDF Modal -->
    <div id="pdf-modal" class="pdf-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="pdf-title"></h3>
                <div class="modal-actions">
                    <a id="download-button" class="modal-button" download>Download</a>
                    <button class="modal-button" onclick="closePdfModal()">Close</button>
                </div>
            </div>
            <iframe id="pdf-iframe" class="pdf-iframe" src="" frameborder="0"></iframe>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const terminalScreen = document.getElementById('terminal-screen');
            const terminalOutput = document.getElementById('terminal-output');
            const mainSite = document.getElementById('main-site');
            const utcClock = document.getElementById('utc-clock');
            const mouseTrailCanvas = document.getElementById('mouse-trail-canvas');
            const accessGrantedContainer = document.getElementById('access-granted-container');
            const ctx = mouseTrailCanvas.getContext('2d');
            const startMessage = document.getElementById('start-message');
            const hiddenInput = document.getElementById('codeword-input-hidden');
            
            // Audio Context & Sounds
            let audioCtx = null;
            let oscillatorHum, oscillatorBeep, oscillatorUnlock, oscillatorError;
            
            const initAudio = () => {
                if (audioCtx) return;
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                
                oscillatorHum = audioCtx.createOscillator();
                oscillatorHum.type = 'sine';
                oscillatorHum.frequency.setValueAtTime(50, audioCtx.currentTime);
                let gainNode = audioCtx.createGain();
                gainNode.gain.setValueAtTime(0.01, audioCtx.currentTime);
                oscillatorHum.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                oscillatorHum.start();
            };

            const playBeep = () => {
                if (!audioCtx) return;
                const oscillatorBeep = audioCtx.createOscillator();
                oscillatorBeep.type = 'sine';
                oscillatorBeep.frequency.setValueAtTime(440, audioCtx.currentTime);
                const gainNode = audioCtx.createGain();
                gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.1);
                oscillatorBeep.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                oscillatorBeep.start();
                oscillatorBeep.stop(audioCtx.currentTime + 0.1);
            };

            const playUnlock = () => {
                if (!audioCtx) return;
                const oscillatorUnlock = audioCtx.createOscillator();
                oscillatorUnlock.type = 'sawtooth';
                oscillatorUnlock.frequency.setValueAtTime(80, audioCtx.currentTime);
                oscillatorUnlock.frequency.exponentialRampToValueAtTime(120, audioCtx.currentTime + 0.5);
                const gainNode = audioCtx.createGain();
                gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.5);
                oscillatorUnlock.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                oscillatorUnlock.start();
                oscillatorUnlock.stop(audioCtx.currentTime + 0.5);
            };

            const playError = () => {
                if (!audioCtx) return;
                const oscillatorError = audioCtx.createOscillator();
                oscillatorError.type = 'square';
                oscillatorError.frequency.setValueAtTime(100, audioCtx.currentTime);
                const gainNode = audioCtx.createGain();
                gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.3);
                oscillatorError.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                oscillatorError.start();
                oscillatorError.stop(audioCtx.currentTime + 0.3);
            };

            // Terminal Logic
            const codeword = '171978';
            let currentCodeword = '';
            let attempts = 0;
            const maxAttempts = 3;
            let terminalActive = false;

            const typeMessage = async (message, colorClass = '') => {
                const parts = message.split('');
                for (const char of parts) {
                    terminalOutput.innerHTML += char;
                    playBeep();
                    await new Promise(resolve => setTimeout(resolve, 50));
                }
                terminalOutput.innerHTML += '<br>';
            };

            const runTerminal = async () => {
                startMessage.style.display = 'none';
                initAudio();
                await typeMessage('Creating secure connection...');
                terminalOutput.innerHTML += 'Enter codeword: ';
                terminalOutput.innerHTML += '<span id="codeword-input"></span><span id="terminal-cursor"></span>';
                terminalActive = true;
                hiddenInput.focus(); // Focus the hidden input to open the keyboard
            };

            const handleKeydown = (e) => {
                if (!terminalActive) return;
                const inputSpan = document.getElementById('codeword-input');
                
                if (e.key.length === 1 && !e.ctrlKey && !e.metaKey) {
                    currentCodeword += e.key;
                    inputSpan.innerHTML += '*';
                    playBeep();
                } else if (e.key === 'Backspace') {
                    currentCodeword = currentCodeword.slice(0, -1);
                    inputSpan.innerHTML = inputSpan.innerHTML.slice(0, -1);
                } else if (e.key === 'Enter') {
                    hiddenInput.blur(); // Blur the input to hide the keyboard
                    checkCodeword();
                }
            };
            
            // Listen for input from the hidden field instead of keydown on the window
            hiddenInput.addEventListener('input', (e) => {
                if (!terminalActive) return;
                const inputSpan = document.getElementById('codeword-input');
                
                const newLength = e.target.value.length;
                const oldLength = currentCodeword.length;

                if (newLength > oldLength) {
                    // Key typed
                    currentCodeword = e.target.value;
                    inputSpan.innerHTML += '*';
                    playBeep();
                } else if (newLength < oldLength) {
                    // Backspace pressed
                    currentCodeword = e.target.value;
                    inputSpan.innerHTML = inputSpan.innerHTML.slice(0, -1);
                }
            });

            hiddenInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault(); // Prevent new line in the input field
                    if (terminalActive) {
                        checkCodeword();
                    }
                }
            });


            const checkCodeword = async () => {
                terminalActive = false;
                const inputSpan = document.getElementById('codeword-input');
                const cursorSpan = document.getElementById('terminal-cursor');
                cursorSpan.style.display = 'none';

                if (currentCodeword === codeword) {
                    await accessGrantedSequence();
                } else {
                    attempts++;
                    if (attempts >= maxAttempts) {
                        await accessDeniedSequence();
                    } else {
                        const failedMessage = '<br><span class="amber-text">Authentication failed. Please try again.</span>';
                        terminalOutput.innerHTML += failedMessage;
                        await new Promise(resolve => setTimeout(resolve, 100));
                        terminalOutput.innerHTML += '<br>Enter codeword: ';
                        terminalOutput.innerHTML += '<span id="codeword-input"></span><span id="terminal-cursor"></span>';
                        currentCodeword = '';
                        hiddenInput.value = ''; // Clear the hidden input
                        cursorSpan.style.display = 'inline-block';
                        terminalActive = true;
                        hiddenInput.focus(); // Re-focus the input
                    }
                }
            };
            
            const accessGrantedSequence = async () => {
                terminalOutput.innerHTML = '';
                accessGrantedContainer.style.opacity = 1;
                playUnlock();
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                accessGrantedContainer.style.opacity = 0;
                await typeMessage('<br>Entering Swami\'s Vision...', 'neon-green');
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                terminalScreen.style.opacity = 0;
                terminalScreen.style.visibility = 'hidden'; /* Hide terminal to allow scrolling */
                mainSite.style.opacity = 1;
                mainSite.style.visibility = 'visible';
                
                if (oscillatorHum) { oscillatorHum.stop(); }
            };

            const accessDeniedSequence = async () => {
                terminalScreen.innerHTML = `<h1 class="glitch-text">ACCESS DENIED</h1>`;
                playError();
                terminalScreen.style.pointerEvents = 'none';
                
                if (oscillatorHum) { oscillatorHum.stop(); }
            };

            // Main Site Logic
            const updateClock = () => {
                const now = new Date();
                const utcString = now.toUTCString().split(' ')[4];
                utcClock.textContent = `UTC: ${utcString}`;
            };

            // Mouse Trail Logic
            let particles = [];
            const particleCount = 15;
            
            const resizeCanvas = () => {
                mouseTrailCanvas.width = window.innerWidth;
                mouseTrailCanvas.height = window.innerHeight;
            };

            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
            
            const neonBlueColor = getComputedStyle(document.documentElement).getPropertyValue('--neon-blue');
            
            function Particle(x, y, color) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 5 + 1;
                this.speedX = Math.random() * 3 - 1.5;
                this.speedY = Math.random() * 3 - 1.5;
                this.color = color;
                this.alpha = 1;
            }

            Particle.prototype.update = function() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.alpha -= 0.03;
                if (this.alpha < 0) this.alpha = 0;
            };

            Particle.prototype.draw = function() {
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            };

            const createParticles = (x, y) => {
                for (let i = 0; i < particleCount; i++) {
                    particles.push(new Particle(x, y, neonBlueColor));
                }
            };
            
            const animateParticles = () => {
                ctx.clearRect(0, 0, mouseTrailCanvas.width, mouseTrailCanvas.height);
                for (let i = 0; i < particles.length; i++) {
                    particles[i].update();
                    particles[i].draw();
                    if (particles[i].alpha <= 0.1) {
                        particles.splice(i, 1);
                        i--;
                    }
                }
                requestAnimationFrame(animateParticles);
            };

            mouseTrailCanvas.addEventListener('mousemove', (e) => {
                createParticles(e.clientX, e.clientY);
            });

            // Modal Functions
            window.openPdfModal = (pdfUrl, filename) => {
                const modal = document.getElementById('pdf-modal');
                const iframe = document.getElementById('pdf-iframe');
                const downloadBtn = document.getElementById('download-button');
                const title = document.getElementById('pdf-title');

                title.textContent = filename;
                iframe.src = pdfUrl;
                downloadBtn.href = pdfUrl;
                downloadBtn.download = filename;

                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // Prevents background scrolling
            };

            window.closePdfModal = () => {
                const modal = document.getElementById('pdf-modal');
                const iframe = document.getElementById('pdf-iframe');
                modal.style.display = 'none';
                iframe.src = ''; // Clear the iframe source
                document.body.style.overflow = 'auto'; // Re-enable background scrolling
            };


            // Start the application
            // Event listener to begin terminal sequence on user interaction
            window.addEventListener('keydown', () => {
                if (startMessage.style.display !== 'none') {
                    runTerminal();
                    animateParticles();
                    setInterval(updateClock, 1000);
                    updateClock();
                }
            }, { once: true });
            
            window.addEventListener('click', () => {
                if (startMessage.style.display !== 'none') {
                    runTerminal();
                    animateParticles();
                    setInterval(updateClock, 1000);
                    updateClock();
                }
            }, { once: true });
        });
    </script>
</body>
</html>
